;(function(Salary) {
	
	Salary.Popup = {};

    var element,
        popups = [],
        length = 0,
        options = {};

    Salary.Popup.init = function(options) {

        if(!options.element) {
            return false;
        }

        options = options || {};
        elements = document.querySelectorAll(options.element);
        length = elements.length;

        for(var i=0; i<length; i++) {
            var element = elements[i];
            var posLeft = element.offsetLeft;
            var posTop = element.offsetTop;
            var target = Salary.lib.getAttr(element, 'data-parent')[0];
            var parent = Salary.lib.getParentNode(element, target)[0];
            var popup = Salary.lib.getChiildNode(parent, '.popup')[0];
            popups.push(popup);
            Salary.lib.setAttr(popup, {
                'style' : 'left:' + (posLeft-17) + 'px; top:' + (posTop+25) + 'px'
            });
        }

        Salary.Popup.setEvent();

    }
    Salary.Popup.setEvent = function() {
        for(var i=0; i<length; i++) {
            (function() {
                var element = elements[i];
                element.index = i;
                Salary.lib.addEventListener(element, 'mouseover', function(e) {
                    e = e || window.event;
                	var element = e.target ? e.target : e.srcElement;
                    var index = element.index;
                    Salary.lib.addClass(popups[index], 'visible');
                });
                Salary.lib.addEventListener(element, 'mouseleave', function(e) {
                    e = e || window.event;
                	var element = e.target ? e.target : e.srcElement;
                    var index = element.index;
                    Salary.lib.removeClass(popups[index], 'visible');
                });
            }());
        }
    }
	
}(window.Salary = window.Salary || {}));